digraph {
  "rankdir"="TD";

  "*" -> "DISABLED" [label="signal_period=0\nquiet_period=-1"];
  "*" -> "DEFINED";

  "DEFINED" -> "SIGNAL" [label="signal_height"];
  "SIGNAL" -> "FAILED" [label="signal_period\nquiet_period=-1"];
  "SIGNAL" -> "LOCKED_IN" [label="threshold passed"];
  "LOCKED_IN" -> "ACTIVE" [label="1 period"];

  "SIGNAL" -> "QUIET" [label="signal_period\nquiet_period>=0"];
  "QUIET" -> "UASF" [label="quiet_period"];
  "UASF" -> "LOCKED_IN" [label="threshold passed"];
  "UASF" -> "LOCKED_IN" [label="uasf_period-1"];

  "DISABLED" [shape=box];
  "FAILED" [shape=box];
  "ACTIVE" [shape=box];

  "QUIET" -> "UASF" [style=invis];
  "QUIET" -> "FAILED" [style=invis];

  { rank=same; "QUIET" "UASF" "LOCKED_IN"; }
  { rank=same; "DISABLED" "FAILED" "ACTIVE"; }

  // "DEFINED" [group="time"];
}


